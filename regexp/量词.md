#### 量词

量词用来指明某个字符串匹配的次数，有以下几种

- ? 重复0次或1次

- + 重复1次或多次

- * 重复0次或多次

- {n} 重复n次

- {n,} 重复n次或多次

- {n,m} 重复n次到m次，闭区间

#### 匹配方式

- 匹配优先

量词默认是匹配优先，又称为贪婪匹配，在量词作用下的表达式会尽可能尝试匹配满足条件的字符，直到后面的字符串不满足这个表达式或者到达字符串的结尾，也就是尽可能多的匹配

例如，正则/'.*'/匹配字符串‘hello world’的匹配过程如下

1. 首先正则中的左引号开始匹配，字符串的第一个字符也是左引号，部分匹配成功

2. .*是匹配优先，.可以匹配除换行符外的所有字符，所以一直匹配到字符串的结束位置

3. 正则中的右引号开始匹配，.*所匹配的字符开始交还字符，让.*后的正则尝试部分匹配，直到匹配成功。显然交还右引号后匹配成功

- 忽略优先

又称为懒惰匹配，在量词作用下的表达式会尽可能忽略掉满足条件的字符，也就是尽可能少的匹配

```js
// 量词后添加?
/a{4,}?/g
```

例如，正则/'.*?'/匹配字符串‘hello world’的匹配过程如下

1. 首先正则中的左引号开始匹配，字符串的第一个字符也是左引号，部分匹配成功

2. .*?是忽略优先，什么也没匹配到

3. 正则中的右引号开始匹配，此时匹配到字符串中的第二个字符h，发现不匹配。为了能让正则中的右引号匹配成功，让.*?去尝试匹配，于是.*?匹配了字符h，然后正则中的右引号接着匹配字符串中的第三个字符e，仍然不匹配，继续让.*?尝试匹配，以此类推，直到.*?匹配了字符hello world后，正则中的右引号匹配成功

- 占有优先（javascript不支持）

与匹配优先的机制类似，只是不会归还已经匹配的字符

```php
// 量词后添加+
/a*+/g
```

参考文档

1. [正则表达式量词匹配方式的讲解](https://zhuanlan.zhihu.com/p/158988947)